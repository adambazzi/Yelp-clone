{"ast":null,"code":"var _jsxFileName = \"/Users/adambazzi/Desktop/Yelp-clone/react-app/src/components/SingleBusinessPage/index.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { clearBusiness, getSingleBusiness } from '../../store/business';\nimport { clearReviews, getReviews, loadReviews } from '../../store/review';\nimport BusinessImages from './BusinessImages';\nimport DisplayReviews from './DisplayReviews';\nimport OpenModalItem from '../OpenModalDiv';\nimport UpdateReviewForm from '../UpdateReview';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport './index.css';\nimport { NavLink } from 'react-router-dom';\nimport BusinessReview from './BusinessReview';\nimport ProfileIcon from './ProfileIcon';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SingleBusinessShow = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    dispatch(getSingleBusiness(id));\n    return () => dispatch(clearBusiness());\n  }, [dispatch, id]);\n\n  // useEffect(() => {\n  //   dispatch(getReviews(id));\n  // }, [dispatch, id]);\n\n  const business = useSelector(state => state.business.business);\n  const user = useSelector(state => state.session.user);\n  useEffect(() => {\n    if (business) {\n      dispatch(getReviews(business.reviews));\n    }\n  }, [business]);\n  const reviews = useSelector(state => state.reviews);\n  const usersReview = Object.values(reviews).find(review => review.user_id === (user === null || user === void 0 ? void 0 : user.id) && review.business_id === business.id);\n  if (!business) {\n    return null;\n  }\n  const reviewsArray = business.reviews;\n  if (!reviewsArray) {\n    return null;\n  }\n  const avgRating = business.avgRating;\n  const price = Number.parseFloat(business.price).toFixed(2);\n  let forcheck;\n  if (user) {\n    forcheck = user.id;\n  }\n  const userHasPosted = reviewsArray.find(r => r.user_id == forcheck);\n  const previewImage = business.images.find(image => image.preview === true);\n  const src = previewImage ? previewImage.url : null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"single-business-top-images\",\n      children: /*#__PURE__*/_jsxDEV(BusinessImages, {\n        images: business.images\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"single-business-top-content\",\n      children: /*#__PURE__*/_jsxDEV(ProfileIcon, {\n        business: business,\n        src: src\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"business-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"article\", {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"address\",\n          children: [business.address, \", \", business.city, \", \", business.state]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"description\",\n          children: business.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-button-container\",\n        children: user ? userHasPosted ? /*#__PURE__*/_jsxDEV(OpenModalItem, {\n          className: \"single-business-review-button\",\n          itemText: \"Edit Your Review\",\n          modalComponent: /*#__PURE__*/_jsxDEV(UpdateReviewForm, {\n            oldReview: usersReview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)\n        // <NavLink className=\"single-business-review-button\" to={`/businesses/${usersReview.id}/reviews/edit`} > EDIT Your Review</NavLink>\n        : /*#__PURE__*/_jsxDEV(NavLink, {\n          className: \"single-business-review-button-link\",\n          to: `/businesses/${business.id}/reviews/new`,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"single-business-review-button\",\n            children: \"Post Your Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 119\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 16\n        }, this) : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"single-business-display-reviews-list\",\n        children: /*#__PURE__*/_jsxDEV(DisplayReviews, {\n          businessId: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"all-biz-reviews\",\n      children: business && business.reviews.map(el => /*#__PURE__*/_jsxDEV(BusinessReview, {\n        review: el\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n_s(SingleBusinessShow, \"/4Rm/RdJO9HzNfgtA+HFbLA8X5c=\", false, function () {\n  return [useDispatch, useParams, useSelector, useSelector, useSelector];\n});\n_c = SingleBusinessShow;\nexport default SingleBusinessShow;\nvar _c;\n$RefreshReg$(_c, \"SingleBusinessShow\");","map":{"version":3,"names":["useEffect","useSelector","useDispatch","useParams","clearBusiness","getSingleBusiness","clearReviews","getReviews","loadReviews","BusinessImages","DisplayReviews","OpenModalItem","UpdateReviewForm","FontAwesomeIcon","faUser","NavLink","BusinessReview","ProfileIcon","SingleBusinessShow","dispatch","id","business","state","user","session","reviews","usersReview","Object","values","find","review","user_id","business_id","reviewsArray","avgRating","price","Number","parseFloat","toFixed","forcheck","userHasPosted","r","previewImage","images","image","preview","src","url","address","city","description","map","el"],"sources":["/Users/adambazzi/Desktop/Yelp-clone/react-app/src/components/SingleBusinessPage/index.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { clearBusiness, getSingleBusiness } from '../../store/business';\nimport { clearReviews, getReviews, loadReviews } from '../../store/review';\nimport BusinessImages from './BusinessImages';\nimport DisplayReviews from './DisplayReviews';\nimport OpenModalItem from '../OpenModalDiv';\nimport UpdateReviewForm from '../UpdateReview';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport './index.css'\nimport { NavLink } from 'react-router-dom';\nimport BusinessReview from './BusinessReview';\nimport ProfileIcon from './ProfileIcon';\n\nconst SingleBusinessShow = () => {\n  const dispatch = useDispatch();\n  const { id } = useParams();\n\n  useEffect(() => {\n    dispatch(getSingleBusiness(id));\n    return () => dispatch(clearBusiness());\n  }, [dispatch, id]);\n\n  // useEffect(() => {\n  //   dispatch(getReviews(id));\n  // }, [dispatch, id]);\n\n  const business = useSelector(state => state.business.business);\n  const user = useSelector(state => state.session.user);\n\n  useEffect(()=>{\n    if(business){\n      dispatch(getReviews(business.reviews))\n    }\n  },[business])\n\n  const reviews = useSelector(state=> state.reviews)\n\n  const usersReview = Object.values(reviews).find(review => review.user_id === user?.id && review.business_id === business.id);\n\n\n  if (!business ) {\n    return null;\n  }\n  const reviewsArray = business.reviews\n  if (!reviewsArray) {\n    return null;\n  }\n\n  const avgRating = business.avgRating\n  const price = Number.parseFloat(business.price).toFixed(2);\n  let forcheck\n  if(user){\n    forcheck=user.id\n  }\n  const userHasPosted =  reviewsArray.find(r => r.user_id == forcheck);\n\n  const previewImage = business.images.find(image => image.preview === true);\n  const src = previewImage ? previewImage.url : null;\n\n\n  return (\n    <>\n      <section id='single-business-top-images'>\n        <BusinessImages images={business.images} />\n      </section>\n      <section id='single-business-top-content'>\n        <ProfileIcon business={business} src={src} />\n      </section>\n      <section id=\"business-info\">\n        <article>\n          <header>\n            <h2>Address</h2>\n          </header>\n          <p class=\"address\">{business.address}, {business.city}, {business.state}</p>\n        </article>\n        <article>\n          <header>\n            <h2>Description</h2>\n          </header>\n          <p class=\"description\">{business.description}</p>\n        </article>\n      </section>\n      <div>\n        {/* <div>\n          <i className=\"fa-regular fa-star\"></i>{avgRating}\n        </div> */}\n          <div className='review-button-container'>\n            {user ?\n              userHasPosted ?\n              <OpenModalItem\n              className=\"single-business-review-button\"\n            itemText=\"Edit Your Review\"\n              modalComponent={<UpdateReviewForm oldReview={usersReview} />}\n              />\n                // <NavLink className=\"single-business-review-button\" to={`/businesses/${usersReview.id}/reviews/edit`} > EDIT Your Review</NavLink>\n              :<NavLink className=\"single-business-review-button-link\" to={`/businesses/${business.id}/reviews/new`} ><p className='single-business-review-button'>Post Your Review</p></NavLink>\n              : ''}\n          </div>\n        <ul className='single-business-display-reviews-list'>\n          <DisplayReviews businessId={id} />\n        </ul>\n      </div>\n    <section className='all-biz-reviews'>\n\n      {/* {reviews && Object.values(reviews).map(el=>( */}\n      {business && business.reviews.map(el=>(\n\n        <BusinessReview review={el}/>\n      ))}\n    </section>\n    </>\n  );\n};\n\nexport default SingleBusinessShow;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}