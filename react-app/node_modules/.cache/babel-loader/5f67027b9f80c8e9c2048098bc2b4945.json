{"ast":null,"code":"var _jsxFileName = \"/Users/adambazzi/Desktop/Yelp-clone/react-app/src/components/AllBusinessPage/BusinessesMap.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport './BusinessMap.css';\nimport { key } from './mapConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = key;\nexport default function BusinessesMap(_ref) {\n  _s();\n  let {\n    businesses\n  } = _ref;\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [lng, setLng] = useState(-70.9);\n  const [lat, setLat] = useState(42.35);\n  const [zoom, setZoom] = useState(9);\n  useEffect(() => {\n    if (map.current) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12',\n      center: [lng, lat],\n      zoom: zoom\n    });\n  });\n  useEffect(() => {\n    // add markers for each business\n    if (map.current) {\n      const markers = businesses.map(business => {\n        const marker = new mapboxgl.Marker().setLngLat([business.lng, business.lat]).setPopup(new mapboxgl.Popup().setHTML(`<p>${business.name}</p>`)).addTo(map.current);\n        return marker;\n      });\n\n      // fit map to markers\n      if (markers.length > 0) {\n        const bounds = new mapboxgl.LngLatBounds();\n        markers.forEach(marker => {\n          bounds.extend(marker.getLngLat());\n        });\n        map.current.fitBounds(bounds, {\n          padding: 50,\n          maxZoom: 15\n        });\n      }\n    }\n  }, [businesses]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      className: \"map-container\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 7\n  }, this);\n}\n_s(BusinessesMap, \"ulylkujH/JHbtgg1wgYh3sZy06Q=\");\n_c = BusinessesMap;\nvar _c;\n$RefreshReg$(_c, \"BusinessesMap\");","map":{"version":3,"names":["React","useRef","useEffect","useState","mapboxgl","key","accessToken","BusinessesMap","businesses","mapContainer","map","lng","setLng","lat","setLat","zoom","setZoom","current","Map","container","style","center","markers","business","marker","Marker","setLngLat","setPopup","Popup","setHTML","name","addTo","length","bounds","LngLatBounds","forEach","extend","getLngLat","fitBounds","padding","maxZoom"],"sources":["/Users/adambazzi/Desktop/Yelp-clone/react-app/src/components/AllBusinessPage/BusinessesMap.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport './BusinessMap.css'\nimport { key } from './mapConfig'\n\nmapboxgl.accessToken = key\n\nexport default function BusinessesMap({ businesses }) {\n  const mapContainer = useRef(null);\n    const map = useRef(null);\n    const [lng, setLng] = useState(-70.9);\n    const [lat, setLat] = useState(42.35);\n    const [zoom, setZoom] = useState(9);\n\n useEffect(() => {\n      if (map.current) return; // initialize map only once\n      map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v12',\n      center: [lng, lat],\n      zoom: zoom\n      });\n    });\n\n  useEffect(() => {\n    // add markers for each business\n    if (map.current) {\n      const markers = businesses.map((business) => {\n        const marker = new mapboxgl.Marker()\n          .setLngLat([business.lng, business.lat])\n          .setPopup(new mapboxgl.Popup().setHTML(`<p>${business.name}</p>`))\n          .addTo(map.current);\n        return marker;\n      });\n\n      // fit map to markers\n      if (markers.length > 0) {\n        const bounds = new mapboxgl.LngLatBounds();\n        markers.forEach((marker) => {\n          bounds.extend(marker.getLngLat());\n        });\n        map.current.fitBounds(bounds, {\n          padding: 50,\n          maxZoom: 15,\n        });\n      }\n    }\n  }, [businesses]);\n\n  return (\n      <div className=\"map-container-wrapper\">\n        <div ref={mapContainer} className=\"map-container\" />\n      </div>\n        );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAO,8BAA8B;AACrC,OAAOC,QAAQ,MAAM,YAAY,CAAC,CAAC;AACnC,OAAO,mBAAmB;AAC1B,SAASC,GAAG,QAAQ,aAAa;AAAA;AAEjCD,QAAQ,CAACE,WAAW,GAAGD,GAAG;AAE1B,eAAe,SAASE,aAAa,OAAiB;EAAA;EAAA,IAAhB;IAAEC;EAAW,CAAC;EAClD,MAAMC,YAAY,GAAGR,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMS,GAAG,GAAGT,MAAM,CAAC,IAAI,CAAC;EACxB,MAAM,CAACU,GAAG,EAAEC,MAAM,CAAC,GAAGT,QAAQ,CAAC,CAAC,IAAI,CAAC;EACrC,MAAM,CAACU,GAAG,EAAEC,MAAM,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACrC,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACX,IAAIQ,GAAG,CAACO,OAAO,EAAE,OAAO,CAAC;IACzBP,GAAG,CAACO,OAAO,GAAG,IAAIb,QAAQ,CAACc,GAAG,CAAC;MAC/BC,SAAS,EAAEV,YAAY,CAACQ,OAAO;MAC/BG,KAAK,EAAE,oCAAoC;MAC3CC,MAAM,EAAE,CAACV,GAAG,EAAEE,GAAG,CAAC;MAClBE,IAAI,EAAEA;IACN,CAAC,CAAC;EACJ,CAAC,CAAC;EAEJb,SAAS,CAAC,MAAM;IACd;IACA,IAAIQ,GAAG,CAACO,OAAO,EAAE;MACf,MAAMK,OAAO,GAAGd,UAAU,CAACE,GAAG,CAAEa,QAAQ,IAAK;QAC3C,MAAMC,MAAM,GAAG,IAAIpB,QAAQ,CAACqB,MAAM,EAAE,CACjCC,SAAS,CAAC,CAACH,QAAQ,CAACZ,GAAG,EAAEY,QAAQ,CAACV,GAAG,CAAC,CAAC,CACvCc,QAAQ,CAAC,IAAIvB,QAAQ,CAACwB,KAAK,EAAE,CAACC,OAAO,CAAE,MAAKN,QAAQ,CAACO,IAAK,MAAK,CAAC,CAAC,CACjEC,KAAK,CAACrB,GAAG,CAACO,OAAO,CAAC;QACrB,OAAOO,MAAM;MACf,CAAC,CAAC;;MAEF;MACA,IAAIF,OAAO,CAACU,MAAM,GAAG,CAAC,EAAE;QACtB,MAAMC,MAAM,GAAG,IAAI7B,QAAQ,CAAC8B,YAAY,EAAE;QAC1CZ,OAAO,CAACa,OAAO,CAAEX,MAAM,IAAK;UAC1BS,MAAM,CAACG,MAAM,CAACZ,MAAM,CAACa,SAAS,EAAE,CAAC;QACnC,CAAC,CAAC;QACF3B,GAAG,CAACO,OAAO,CAACqB,SAAS,CAACL,MAAM,EAAE;UAC5BM,OAAO,EAAE,EAAE;UACXC,OAAO,EAAE;QACX,CAAC,CAAC;MACJ;IACF;EACF,CAAC,EAAE,CAAChC,UAAU,CAAC,CAAC;EAEhB,oBACI;IAAK,SAAS,EAAC,uBAAuB;IAAA,uBACpC;MAAK,GAAG,EAAEC,YAAa;MAAC,SAAS,EAAC;IAAe;MAAA;MAAA;MAAA;IAAA;EAAG;IAAA;IAAA;IAAA;EAAA,QAChD;AAEZ;AAAC,GA/CuBF,aAAa;AAAA,KAAbA,aAAa;AAAA;AAAA"},"metadata":{},"sourceType":"module"}