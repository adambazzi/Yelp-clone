{"ast":null,"code":"var _jsxFileName = \"/Users/adambazzi/Desktop/Yelp-clone/react-app/src/components/UpdateReview/index.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { readASingleReview } from '../../store/review';\nimport { getSingleBusiness } from '../../store/business';\nimport { editReview } from '../../store/review';\nimport DynamicStars from '../UpdateReview/DynamicStars';\nimport { useModal } from '../../context/Modal';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UpdateReviewForm(_ref) {\n  _s();\n  let {\n    oldReview\n  } = _ref;\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const {\n    closeModal\n  } = useModal();\n  const [review, setReview] = useState('');\n  const [stars, setStars] = useState(oldReview.stars);\n  const [validationErrors, setValidationErrors] = useState({\n    stars: '',\n    review: ''\n  });\n  useEffect(() => {\n    let tofill = async () => {\n      setReview(oldReview.review);\n      setStars(oldReview.stars);\n    };\n    tofill();\n  }, [dispatch, id]);\n  const business = useSelector(state => state.business.business);\n  const onSubmit = async e => {\n    e.preventDefault();\n    const toedit = {\n      review,\n      stars\n    };\n    const errors = {};\n    if (stars <= 0 || stars > 5) errors.stars = 'Reviews must have 1 to 5 stars';\n    if (!review.length) errors.review = 'Review is required';\n    if (!Object.values(errors).length) {\n      const editedreview = await dispatch(editReview(oldReview.id, toedit));\n      await dispatch(getSingleBusiness(oldReview.business_id));\n      closeModal();\n    } else {\n      setValidationErrors(errors);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"update-review-form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Update your review for \", business.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"update-review-form\",\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(DynamicStars, {\n        class: \"class-dyn\",\n        stars: stars,\n        setStars: setStars\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"validationErrors\",\n        children: validationErrors.stars\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          id: \"update-review-text\",\n          onChange: e => setReview(e.target.value),\n          value: review\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"validationErrors\",\n        children: validationErrors.review\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"default-button rd-bg curs\",\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(UpdateReviewForm, \"2IHp8Ajs/GAlkQep34zze9iOQR8=\", false, function () {\n  return [useParams, useDispatch, useModal, useSelector];\n});\n_c = UpdateReviewForm;\nvar _c;\n$RefreshReg$(_c, \"UpdateReviewForm\");","map":{"version":3,"names":["useState","useEffect","useHistory","useParams","useDispatch","useSelector","readASingleReview","getSingleBusiness","editReview","DynamicStars","useModal","UpdateReviewForm","oldReview","id","dispatch","closeModal","review","setReview","stars","setStars","validationErrors","setValidationErrors","tofill","business","state","onSubmit","e","preventDefault","toedit","errors","length","Object","values","editedreview","business_id","name","target","value"],"sources":["/Users/adambazzi/Desktop/Yelp-clone/react-app/src/components/UpdateReview/index.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { readASingleReview } from '../../store/review';\nimport { getSingleBusiness } from '../../store/business';\nimport { editReview } from '../../store/review';\nimport DynamicStars from '../UpdateReview/DynamicStars';\nimport { useModal } from '../../context/Modal';\nimport './index.css';\n\nexport default function UpdateReviewForm({ oldReview }) {\n    const { id } = useParams();\n    const dispatch = useDispatch();\n    const { closeModal } = useModal();\n\n    const [review, setReview] = useState('');\n    const [stars, setStars] = useState(oldReview.stars);\n\n    const [validationErrors, setValidationErrors] = useState({\n        stars: '',\n        review: ''\n    })\n\n    useEffect(() => {\n        let tofill = async() =>{\n\n          setReview(oldReview.review)\n          setStars(oldReview.stars)\n\n        }\n        tofill()\n    }, [dispatch, id])\n\n    const business = useSelector(state => state.business.business);\n    const onSubmit= async (e) =>{\n        e.preventDefault()\n        const toedit ={\n            review,\n            stars\n        }\n\n        const errors = {};\n\n        if (stars <= 0 || stars > 5) errors.stars = 'Reviews must have 1 to 5 stars';\n        if (!review.length) errors.review = 'Review is required';\n\n        if (!Object.values(errors).length) {\n            const editedreview = await dispatch(editReview(oldReview.id, toedit))\n\n            await dispatch(getSingleBusiness(oldReview.business_id))\n            closeModal();\n        } else {\n            setValidationErrors(errors);\n        }\n\n    }\n\n    return(\n        <div className='update-review-form-container'>\n            <h1>Update your review for {business.name}</h1>\n            <form\n                className=\"update-review-form\"\n                onSubmit={onSubmit}\n            >\n                <DynamicStars class=\"class-dyn\" stars={stars} setStars={setStars} />\n                <span className='validationErrors'>{validationErrors.stars}</span>\n\n                <div>\n                    <textarea\n                        type='text'\n                        id='update-review-text'\n                        onChange={(e) => setReview(e.target.value)}\n                        value={review}\n                    ></textarea>\n                </div>\n                    <span className='validationErrors'>{validationErrors.review}</span>\n                <div>\n                    <input className='default-button rd-bg curs' type=\"submit\" />\n                </div>\n            </form>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}